# direnv configuration for attic-cache
# Automatically enters the Nix development shell

# Use flake-based development shell
use flake

# Optional: Load environment variables from .env if it exists
# dotenv_if_exists

# Export Bazel cache directory
export BAZEL_CACHE_DIR="${XDG_CACHE_HOME:-$HOME/.cache}/bazel"

# Kubernetes context hint (set this to your Civo context)
# export KUBECONFIG="$HOME/.kube/config"

# Attic configuration
export ATTIC_CONFIG_DIR="${XDG_CONFIG_HOME:-$HOME/.config}/attic"

# Layout for project-specific bin directory
layout_dir=$(direnv_layout_dir)
mkdir -p "$layout_dir/bin"
PATH_add "$layout_dir/bin"

# Watch additional files for changes
watch_file flake.nix
watch_file flake.lock
watch_file .bazelversion
